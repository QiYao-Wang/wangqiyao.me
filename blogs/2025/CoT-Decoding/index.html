<!DOCTYPE html>
<html lang="en" class="no-js">
  
<head>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --light-gray: #ecf0f1;
      --dark-gray: #7f8c8d;
      --text-color: #333;
      --sidebar-width: 280px;
      --content-width: 1200px;
    }

    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      max-width: var(--content-width);
      margin: 0 auto;
      padding: 0 20px;
      background-color: #f9f9f9;
    }

    a {
      color: var(--secondary-color);
      text-decoration: none;
      transition: color 0.3s;
    }

    a:hover {
      color: var(--accent-color);
      text-decoration: underline;
    }

    h1, h2, h3, h4, h5 {
      color: var(--primary-color);
      margin-top: 1.5em;
    }

    h1 { 
      font-size: 2.2em;
      margin-top: 0.8em;
      margin-bottom: 0.5em;
      border-bottom: 2px solid var(--light-gray);
      padding-bottom: 0.3em;
    }
    
    h2 { 
      font-size: 1.8em; 
      border-bottom: 1px solid var(--light-gray); 
      padding-bottom: 0.3em; 
      margin-top: 1.8em;
    }
    
    h3 { 
      font-size: 1.5em;
      margin-top: 1.5em;
    }

    /* å¯¼èˆªæ æ ·å¼ */
    .nav {
      display: flex;
      justify-content: flex-end;
      background-color: var(--primary-color);
      padding: 1em;
      border-radius: 5px;
      margin-bottom: 2em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .nav a {
      color: white;
      margin: 0 1em;
      font-weight: 500;
      padding: 0.5em 0;
      transition: all 0.3s;
    }

    .nav a:hover {
      color: var(--accent-color);
      text-decoration: none;
    }

    /* ä¸»è¦å†…å®¹å¸ƒå±€ */
    .main-content {
      display: flex;
      gap: 2em;
    }

    .content {
      flex: 1;
      min-width: 0;
      background: white;
      padding: 2em;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    /* ä¾§è¾¹æ æ ·å¼ */
    .sidebar {
      position: sticky;
      top: 20px;
      width: var(--sidebar-width);
      padding: 1.5em;
      border-radius: 10px;
      margin-bottom: 2em;
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      height: fit-content;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
    }

    .sidebar strong {
      display: block;
      font-size: 1.1em;
      color: var(--primary-color);
      padding-bottom: 0.8em;
      margin-bottom: 0.8em;
      border-bottom: 2px solid var(--secondary-color);
    }

    .sidebar ul {
      list-style-type: none;
      padding-left: 0;
      margin: 0;
    }

    .sidebar li {
      margin-bottom: 0.6em;
      position: relative;
      padding-left: 1em;
      transition: all 0.2s ease;
    }

    .sidebar li:before {
      content: "";
      position: absolute;
      left: 0;
      top: 0.6em;
      width: 6px;
      height: 6px;
      background-color: var(--secondary-color);
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .sidebar li:hover:before {
      background-color: var(--accent-color);
      transform: scale(1.3);
    }

    .sidebar a {
      color: var(--primary-color);
      display: block;
      padding: 0.3em 0;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .sidebar a:hover {
      color: var(--accent-color);
      padding-left: 5px;
    }

    /* åšå®¢ç‰¹å®šæ ·å¼ */
    .blog-meta {
      color: var(--dark-gray);
      font-size: 0.9em;
      margin-bottom: 1.5em;
      display: flex;
      align-items: center;
    }

    .blog-tag {
      background-color: var(--light-gray);
      color: var(--primary-color);
      padding: 0.2em 0.6em;
      border-radius: 3px;
      font-size: 0.8em;
      margin-left: 0.8em;
    }

    .blog-content {
      margin-top: 1.5em;
    }

    .blog-content p {
      margin-bottom: 1.2em;
    }

    pre {
      background-color: #f5f5f5;
      padding: 1em;
      border-radius: 5px;
      overflow-x: auto;
      margin: 1.5em 0;
      border-left: 4px solid var(--secondary-color);
    }

    code {
      font-family: 'Courier New', Courier, monospace;
      background-color: #f5f5f5;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-size: 0.9em;
    }

    figure {
      margin: 1.5em 0;
      text-align: center;
    }

    figure img {
      max-width: 100%;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    figcaption {
      color: var(--dark-gray);
      font-size: 0.9em;
      margin-top: 0.5em;
    }

    blockquote {
      border-left: 4px solid var(--secondary-color);
      padding-left: 1em;
      margin: 1.5em 0;
      color: var(--dark-gray);
      font-style: italic;
    }

    /* æ•°å­¦å…¬å¼æ ·å¼ */
    .math {
      overflow-x: auto;
      margin: 1em 0;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 900px) {
      .main-content {
        flex-direction: column;
      }
      
      .sidebar {
        position: relative;
        width: auto;
        top: auto;
      }
      
      .nav {
        justify-content: center;
      }
      
      .nav a {
        margin: 0 0.8em;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  
  <!-- ä¿®æ”¹MathJaxé…ç½®ä»¥æ”¯æŒè¡Œå†…å…¬å¼ -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],  // å¯ç”¨è¡Œå†…æ•°å­¦å…¬å¼
        displayMath: [['$$', '$$'], ['\\[', '\\]']] // æ˜¾ç¤ºæ•°å­¦å…¬å¼
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  
  <script>hljs.highlightAll();</script>
  <script>
    html {
      scroll-behavior: smooth;
    }
  </script>
  
</head>

<body>
  <div class="nav">
    <a href="https://qiyao-wang.github.io/">Homepage</a>
    <a href="https://qiyao-wang.github.io/blogs/">Blogs</a>
    <a href="https://qiyao-wang.github.io/paper_daily/">Paper Daily</a>
  </div>

  <div class="main-content">
    <div class="sidebar sticky">
      <div id="toc">
        <strong>Table of Contents</strong>
        <ul></ul>
      </div>
    </div>
    
    <div class="content">
      <h1 id="chain-of-thought-reasoning-without-prompting">Chain-of-Thought Reasoning without Prompting</h1>
      <div class="blog-meta">
        <span>Jan. 07, 2025 - Feb. 07, 2025 Â· Qiyao Wang</span>
        <span class="blog-tag">#Reasoning</span>
      </div>

      <div class="blog-content">
        <p>å¤§æ¨¡å‹çš„æ¨ç†æœ€è¿‘å¾ˆç«ï¼Œæˆ‘ä¸ªäººå¯¹äºæ¨ç†çš„ç†è§£æ˜¯åŸºäºçº¿ç´¢æˆ–å‰é¢çš„æ¨ç†é€»è¾‘ä¸æ–­å‘åæœ‰é€»è¾‘åœ°å»¶ä¼¸ï¼Œè¿™æˆ–è®¸å’Œè‡ªå›å½’çš„å½¢å¼å¾ˆåƒï¼ŒDenny Zhou çš„è¿™ç¯‡è®ºæ–‡<sup>[1]</sup>é€šè¿‡ä¿®æ”¹è´ªå©ªè§£ç ï¼ˆgreedy decodingï¼‰ä¸ºåŸºäº CoT-Decoding çš„æœ‰é€‰æ‹©æ€§çš„ top-k decodingï¼Œä»æ— éœ€æç¤ºï¼ˆwithout promptingï¼‰çš„è§†è§’æ¥æ¢ç´¢æˆ–è§‚å¯Ÿå¤§æ¨¡å‹å†…éƒ¨çš„æ¨ç†ã€‚æœ¬æ–‡å°†é¦–å…ˆè¯¦ç»†ä»‹ç»è¿™ç¯‡è®ºæ–‡ï¼Œä¹‹åè¿›è¡Œä»£ç å®ç°ï¼Œå¸Œæœ›èƒ½åœ¨ä¸€å‘¨å†™å®Œ ğŸ˜ã€‚</p>

        <h2 id="the-introduction-of-research-question">The Introduction of Research Question</h2>
        <p>åœ¨æœ¬æ–‡ä¹‹å‰ï¼Œå¤§éƒ¨åˆ†çš„è®ºæ–‡èšç„¦åœ¨åˆ©ç”¨ Prompting çš„æ–¹å¼æ¥æ¿€å‘ LLMs çš„æ¨ç†èƒ½åŠ›ï¼Œå¦‚ ICL ä¸­çš„ Few-Shot Learning åœ¨æµ‹è¯•é—®é¢˜å‰ç»™å®šå‡ ä¸ªä¸æµ‹è¯•é—®é¢˜ç±»ä¼¼çš„ç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹ä¸­é€šå¸¸åŒ…å«ç€å¯¹åº”é—®é¢˜è§£å†³æ–¹æ¡ˆçš„æ¨ç†æµç¨‹ï¼Œæ¦‚æ‹¬çš„è¯´å³<strong>ç»™å®šå…·æœ‰ä¸­é—´æ­¥éª¤çš„å°‘æ ·æœ¬æç¤ºï¼ˆFew-Shotï¼‰</strong>ï¼Œæˆ–ä½¿ç”¨é›¶æ ·æœ¬ï¼ˆZero-Shotï¼‰æç¤ºçš„æ–¹å¼æŒ‡å¯¼æ¨¡å‹ç»™å‡ºç›¸åº”çš„ä¸­é—´æ­¥éª¤ï¼Œä¾‹å¦‚ (Nye et.al, 2021<sup>[2,3]</sup>ï¼‰ åœ¨ LLMs å‡ºç°ä¹‹å‰å°±å°è¯•ä½¿ç”¨ XML æ ¼å¼æ¥æŒ‡å¯¼æ¨¡å‹åœ¨ç»™å‡ºæ­£ç¡®ç­”æ¡ˆä¹‹å‰åœ¨ <code>&lt;scratch&gt; computing process &lt;/scratch&gt;</code> ä¸­ç»™å‡ºè®¡ç®—è¿‡ç¨‹ï¼Œä¹‹åå†ç»™å‡ºç­”æ¡ˆï¼Œä»¥åŠåˆ©ç”¨æ˜¾å¼çš„æ€ç»´é“¾æç¤º<sup>[4]</sup> <code>Let's think step by step.</code> æ¿€å‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œä½¿å¾—å¤§æ¨¡å‹åœ¨è¾“å‡ºæœ€ç»ˆç­”æ¡ˆä¹‹å‰èƒ½å¤Ÿç»™å‡ºä¸€å®šçš„æ¨ç†è¿‡ç¨‹ã€‚é™¤ prompting æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ model training æˆ– instruction tuning æ¥æ¿€å‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œä½†è¿™æ ·çš„æ–¹å¼é€šå¸¸ä¼šä½¿å¾—æ¨¡å‹åœ¨é€šç”¨èƒ½åŠ›ä¸Šäº§ç”Ÿç¾éš¾æ€§é—å¿˜çš„æ•ˆæœï¼Œåœ¨æ•°æ®å±‚é¢ï¼ŒåŸºäºå‚æ•°è®­ç»ƒçš„æ–¹æ³•è¿˜éœ€è¦æ„é€ å¤§é‡çš„ CoT çš„æ¨ç†æ•°æ®ï¼Œæˆæœ¬è¾ƒé«˜ã€‚</p>

        <p>æç¤ºæ–¹æ³•çš„å…³é”®æ˜¯å¦‚ä½•åœ¨å¤§æ¨¡å‹å›ç­”æœ€ç»ˆç­”æ¡ˆä¹‹å‰ç»™å‡ºä¸€å®šçš„æ¨ç†ä¸­é—´è¿‡ç¨‹ï¼ˆintermediate stepsï¼‰ï¼Œè¿™ä¸ªä¸­é—´è¿‡ç¨‹æ˜¯æ¨ç†çš„å…³é”®ã€‚é™¤æç¤ºæ–¹æ³•å¤–ï¼Œä¹Ÿæœ‰åˆ©ç”¨ model training å’Œ instruction tuning æ¥æå‡æ¨¡å‹ç”Ÿæˆä¸­é—´æ­¥éª¤èƒ½åŠ›çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·çš„æ–¹æ³•ä¸åŸºäº prompt çš„æ–¹æ³•ï¼Œéƒ½å—é™äº "instruction/prompt"ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸æ–­åœ°ä¿®ç¼®ä½ ç²¾å¿ƒè®¾è®¡çš„ prompt æ‰æœ‰å¯èƒ½æå‡ä¸€äº›æ€§èƒ½ã€‚æœ¬æ–‡æå‡ºäº†è¿™æ ·çš„é—®é¢˜ï¼Œ<strong>åœ¨æ— éœ€ç²¾å¿ƒè®¾è®¡æç¤ºçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ¿€å‘LLMsçš„æ¨ç†èƒ½åŠ›ï¼Ÿ</strong>ï¼Œä»¥åŠ <strong>å¦‚ä½•æ›´å¥½åœ°ç†è§£æ¨¡å‹è‡ªèº«çš„å†…éƒ¨æ¨ç†èƒ½åŠ›ï¼Ÿ</strong> ä½†å¤§æ¨¡å‹é€šå¸¸å€¾å‘äºç›´æ¥è¾“å‡ºæœ€ç»ˆçš„é—®é¢˜ç»“æœï¼Œæœ¬æ–‡ä»è§£ç è¿‡ç¨‹å‡ºå‘ï¼Œæå‡ºäº†<strong>CoT-decoding</strong>ï¼Œèƒ½å¤Ÿä¸åŸºäºæç¤ºï¼Œæ¿€å‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼ˆç”Ÿæˆä¸­é—´çš„æ¨ç†æ­¥éª¤ï¼‰ã€‚</p>

        <h2 id="cot-decoding-methodology">CoT-Decoding Methodology</h2>
        <p>ä¸ºäº†åœ¨æ— éœ€ prompting çš„å‰æä¸‹æ¿€å‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œæœ¬æ–‡ä» decoding é˜¶æ®µå‡ºå‘ï¼Œå…ˆä¸è€ƒè™‘åŒ…å« top-kã€top-p åŠ temperature åœ¨å†…çš„é‡‡æ ·æ–¹æ³•ï¼Œå¤§è¯­è¨€æ¨¡å‹å¯ä»¥é€šè¿‡ greedy decoding çš„æ–¹å¼æ¥é‡‡æ ·ï¼Œå³æ¯æ¬¡é€‰æ‹©å‡ºç°æ¦‚ç‡æœ€å¤§çš„ Tokenã€‚æœ¬æ–‡çš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œåœ¨ç¬¬ä¸€ä¸ªè§£ç æ­¥ï¼ˆfirst decoding stepï¼‰æ—¶ï¼Œä¸ä»…åªé‡‡æ · greedy decoding å¯¹åº”çš„ Tokenï¼Œè€Œæ˜¯å¼•å…¥è¶…å‚æ•° kï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªè§£ç æ­¥ä¸­ top-k ä¸ª Tokensï¼Œåœ¨åç»­çš„è§£ç æ­¥ä¸­ï¼Œåˆ†åˆ«å¯¹è¯¥ k ä¸ª Token è¿›è¡Œè´ªå©ªè§£ç ï¼Œå¦‚å›¾ 1 æ‰€ç¤ºã€‚</p>
        
        <figure>
          <img src="Illustration_of_CoT-decoding.jpg" alt="Illustration_of_CoT-decoding-image">
          <figcaption>å›¾1ï¼šCoT-Decoding è§£é‡Š</figcaption>
        </figure>
        
        <p>åœ¨è·å¾—ç¬¬ä¸€ä¸ªè§£ç æ­¥çš„ k ä¸ª Tokens å¯¹åº”çš„ CoT-Path åï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„é—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„/æ°å½“çš„ CoT-Pathï¼Ÿ</strong>åœ¨ Self-Consistency<sup>[5]</sup> ä¸­é€šè¿‡èšåˆé‡‡æ ·åçš„ç­”æ¡ˆï¼Œé€‰å‡ºå…¶ä¸­æŠ•ç¥¨æ¬¡æ•°ï¼ˆå‡ºç°æœ€å¤šï¼‰çš„ç­”æ¡ˆä½œä¸ºæœ€ç»ˆçš„ç»“æœï¼Œè¿™æ˜¯ä»ä¸€è‡´æ€§è§’åº¦çœ‹æ¥ååˆ†è‡ªç„¶çš„ã€‚æœ¬æ–‡çš„ CoT-Decoding ä¸ºæ¯æ¡ CoT-Path å¼•å…¥äº†ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰ï¼Œå…¶ä¸­å…³æ³¨æ¯ä¸ªè§£ç æ­¥éª¤ï¼Œå¯¹äº ç¬¬ $k$ ä¸ª CoT-Path çš„ç½®ä¿¡åº¦è®¡ç®—å¦‚ä¸‹</p>
        
        <div class="math">
          $$
          \Delta_{k,\text{answer}} = \frac{1}{|\text{answer}|}\sum_{x_t\in\text{answer}}p(x_t^1|x_{< t})-p(x_t^2|x_{< t})
          $$
        </div>

        <p>å³ï¼Œåœ¨ç»™å®šå‰ $t-1$ ä¸ª Tokens è§£ç ç¬¬ $t$ æ­¥æ—¶ï¼Œç¬¬ $t$ æ­¥ä¸­æ¦‚ç‡æœ€å¤§çš„ä¸¤ä¸ª Token $x_t^1$ å’Œ $x_t^2$ çš„å·®å€¼ï¼Œä»è¯¥ CoT-Path çš„ç¬¬ä¸€ä¸ª Token åˆ°ç»“å°¾ Token çš„è¯¥å·®å€¼ä¹‹å’Œçš„å½’ä¸€åŒ–å³ä¸ºç½®ä¿¡åº¦ã€‚è¿™æ ·çš„å®šä¹‰èƒ½å¤Ÿå¾—åˆ°æ‰€æœ‰è§£ç æ­¥ä¸­é‡‡æ ·è¯¥ Token çš„å¹³å‡ç½®ä¿¡åº¦ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºï¼ˆä½œè€…åœ¨ç»“è®ºä¸­ä¹Ÿæœ‰æåˆ°ï¼‰è¿™ç§ç½®ä¿¡åº¦è®¡ç®—æ–¹æ³•ä¼¼ä¹ä¸å¤ªå‡†ç¡®ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰æ­¥çš„ç½®ä¿¡åº¦éƒ½æ˜¯åŒç­‰é‡è¦ã€‚é€šè¿‡è¯¥ç½®ä¿¡åº¦çš„è®¡ç®—æ–¹å¼ï¼Œæ‰€æœ‰çš„ $k$ ä¸ªè§£ç è·¯å¾„éƒ½èƒ½å¤Ÿè¢«å¯¹åº”çš„ $\Delta$ å€¼è¿›è¡Œæ ‡è®°ã€‚å›¾ 1 ä¸­å³ä¸‹è§’çš„å›¾ä¾‹å¯ä»¥çœ‹åˆ°é¢œè‰²è¶Šæ·±åˆ™ä»£è¡¨è¯¥ CoT-Path çš„ confidence $\Delta$ è¶Šå¤§ï¼Œç”šè‡³è¿™æ ·çš„æŒ‡æ ‡åœ¨è¯¥é—®é¢˜ç¤ºä¾‹ä¸Šä¸ç»“æœçš„æ­£ç¡®æ€§æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼Œå³åœ¨æ­£ç¡®ç­”æ¡ˆä¸Šçš„ç½®ä¿¡åº¦å¤§äºé”™è¯¯ç­”æ¡ˆï¼›ä¸ greedy decoding è¿™ç§æ²¡æœ‰ CoT-Path çš„é‡‡æ ·ç»“æœç›¸æ¯”ï¼ŒCoT-Path å…·æœ‰æ›´å¤§çš„ $\Delta$ã€‚åŒæ—¶ä½œè€…é˜æ˜ï¼Œåœ¨ $k=10$ çš„ top-10 è§£ç è·¯å¾„ä¸­æŠ½å–æœ€å¤§ç½®ä¿¡åº¦çš„è·¯å¾„çš„å®éªŒä¸­ï¼Œ88% çš„æ•°æ®éƒ½å­˜åœ¨ CoT-Pathã€‚å¦‚å›¾ 2 æ‰€ç¤ºï¼Œä¸º PaLM-2 æ¨¡å‹åœ¨ GSM8K å’Œ Year Parity æ•°æ®é›†ä¸Šçš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ‹¬å·ä¸­çš„è“è‰²æ•°å­—å³è¡¨ç¤ºå¯¹åº” CoT-Path çš„ç½®ä¿¡åº¦ã€‚</p>
        
        <figure>
          <img src="example-palm.jpg" alt="example-palm-image">
          <figcaption>å›¾2ï¼šPaLM æ¨¡å‹åœ¨ GSM8K å’Œ Year Parity æ•°æ®é›†ä¸Šçš„ç¤ºä¾‹</figcaption>
        </figure>

        <p>ä»ä¸Šè¿°å†…å®¹å¯ä»¥çœ‹åˆ°ï¼Œé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹å¯ä»¥é€šè¿‡è€ƒè™‘å¤šä¸ªå¯èƒ½çš„ first step token æ¥è·å¾—å…³é”®çš„ä¸­é—´æ­¥éª¤ï¼Œè¿™äº›ä¸­é—´æ­¥éª¤èƒ½å¤Ÿæå‡å¯¹åº”çš„ç­”æ¡ˆçš„ç½®ä¿¡åº¦ï¼Œè€Œåªè€ƒè™‘ greedy decoding æ—¶ï¼Œå…¶ä¸­å¤§å¤šä¸åŒ…å«ç›¸åº”çš„ä¸­é—´æ­¥éª¤ï¼Œè€Œæ˜¯ç›´æ¥è¾“å‡ºç­”æ¡ˆï¼Œè¿™ä¹Ÿé€ æˆå¯¹åº”çš„ greedy decoding path çš„ç½®ä¿¡åº¦ç›¸å¯¹è¾ƒä½ã€‚</p>
        <p>åœ¨ CoT-Decoding çš„ç½®ä¿¡åº¦è®¡ç®—æ–¹æ³•ä¸­ï¼Œå¦‚æœè®¡ç®—ä¸Šæ–‡æ‰€è¯´çš„åœ¨å…¨å¥è§†é‡ä¸Šè®¡ç®—ç›¸åº”çš„åˆ†æ•°å¯èƒ½ä¼šå¼•å…¥ä¸€äº›ä¸å¿…è¦çš„ tokenï¼Œå› æ­¤è¯†åˆ«ç›¸åº”çš„ç­”æ¡ˆåŒºé—´æ˜¯ååˆ†é‡è¦çš„ï¼Œå¦‚å›¾ 2 ä¸­æœ€å¥½çš„ç½®ä¿¡åº¦è®¡ç®—åŒºé—´æ˜¯ "60" çš„ä¸¤ä¸ª token "6" å’Œ "0"ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥ prompt <code>So the answer is</code> æ¥æŒ‡å¯¼æ¨¡å‹è¾“å‡ºç»“æœï¼Œä½†è¿™å¯èƒ½ä¸æœ¬æ–‡ "without prompt" ç›¸æ‚–ï¼Œä¼šä¸ä¼šä½¿å¾—æ¨¡å‹æ›´å€¾å‘äºç›´æ¥è¾“å‡ºç­”æ¡ˆï¼Ÿæ–‡ä¸­å¹¶æœªè¿›è¡Œå®éªŒï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥æ€è€ƒçš„ç‚¹ã€‚</p>

        <h2 id="findings">Findings</h2>
        <p>æœ¬æ–‡ä¸è¿‡å¤šé˜é‡Šå…·ä½“çš„å®éªŒå†…å®¹åŠæ•°æ®é›†ç­‰ï¼Œè€Œæ˜¯ä»¥ä½œè€…æŠ¥å‘Šçš„ç›¸å…³å‘ç°ä¸ºè„‰ç»œå¯¹å®éªŒç»“æœè¿›è¡Œå±•ç¤ºä¸åˆ†æã€‚</p>
        
        <h3 id="finding-1">1. CoT-Decoding can extract CoT-Paths more reliably than other extraction methods.</h3>
        <p>ä¸‹é¢çš„å®éªŒé€šè¿‡ä¿®æ”¹ä¸åŒçš„è§£ç æ–¹å¼å’Œå¯¹è§£ç è·¯å¾„çš„æ’åºæ–¹å¼æ¥è¯´æ˜ CoT-Decoding çš„ç½®ä¿¡åº¦æ–¹æ³•åœ¨ CoT-Path è·¯å¾„çš„é€‰æ‹©ä¸Šçš„ä¼˜åŠ¿ã€‚å›¾ 3 ä¸­ç¬¬ä¸€è¡Œè´ªå©ªè§£ç  Greedy decodingï¼Œåªé€‰æ‹© first step tokens ä¸­æ¦‚ç‡æœ€å¤§çš„ token è¿›è¡Œåç»­çš„ä¸€ç³»åˆ—è§£ç æ­¥éª¤ï¼ˆåŒæ ·æ˜¯è´ªå©ªè§£ç ï¼‰ï¼›å›¾ 3 ä¸­åä¸‰è¡Œå‡ä»£è¡¨é‡‡å–é€‰æ‹©å¤šä¸ªï¼ˆæ­¤å¤„å›ºå®š $k=10$ï¼‰ first step token çš„ CoT-Pathï¼Œå…¶ä¸­ CoT-Path çš„æœ€ç»ˆé€‰æ‹©æ–¹å¼åˆ†åˆ«ä¸ºï¼šå¯¹æ•°æ¦‚ç‡æœ€å¤§çš„ï¼Œé•¿åº¦æ­£åˆ™åŒ–åå¯¹æ•°æ¦‚ç‡æœ€å¤§çš„ä»¥åŠæœ¬æ–‡çš„ç½®ä¿¡åº¦æ–¹å¼ã€‚å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼ŒCoT-Decoding çš„ç½®ä¿¡åº¦æ–¹æ³•åœ¨ GSM8K å’Œ Year Parity ä¸¤ä¸ªæ•°æ®é›†ä¸Šçš„æ€§èƒ½æå‡ååˆ†æ˜¾è‘—ã€‚</p>
        
        <figure>
          <img src="CoT-Path_extraction_method.png" alt="CoT-Path_extraction_method">
          <figcaption>å›¾3ï¼šPaLM-2 L æ¨¡å‹ä¸Šå¯¹ä¸åŒçš„ CoT-Path æŠ½å–æ–¹æ³•çš„å®éªŒç»“æœã€‚</figcaption>
        </figure>

        <h3 id="finding-2">2. CoT-Decoding can extract CoT-Paths more usefully than other approaches.</h3>
        <p>ä¸Šæ–‡ä¹Ÿæåˆ°äº† Self-Consistency<sup>[5]</sup> ä»¥é‡‡æ ·å¤šæ¬¡æŠ•ç¥¨çš„æ–¹å¼é€‰å‡ºæ›´å¯é çš„ CoT-Pathï¼Œæœ¬æ–‡å¯¹æ¯”äº†åœ¨æ²¡æœ‰ CoT-Promptï¼ˆLet's think step by stepï¼‰çš„æƒ…å†µä¸‹ Self-Consistency å’Œ CoT-Decoding çš„æ•ˆæœï¼Œå¯ä»¥å‘ç°ï¼Œåœ¨æ²¡æœ‰ CoT-Prompt çš„æƒ…å†µä¸‹ï¼ŒCoT-Decoding åœ¨ GSM8K ä¸Šçš„æ€§èƒ½èƒ½å¤Ÿæ˜¾è‘—ä¼˜äºè´ªå©ªè§£ç å’Œ Self-Consistencyï¼ŒCoT-Decoding é€šè¿‡èƒ½å¤Ÿé€‰æ‹©å¤šä¸ª first step token æ¥å¼•å…¥ CoT-Path çš„å¤šæ ·æ€§ã€‚</p>
        
        <figure>
          <img src="without_prompt.png" alt="without_prompt">
          <figcaption>å›¾4ï¼šCoT-Decoding and self-consistency without prompts on GSM8K.</figcaption>
        </figure>

        <h3 id="finding-3">3. Branching at other decoding steps.</h3>
        <p>æœ¬æ–‡ CoT-Decoding åœ¨ first step tokens ä¸­è¿›è¡Œåˆ†æ”¯ï¼Œå³å›¾ 5 ä¸­çš„ Step 0ï¼Œå¦‚å›¾ 5 æ‰€ç¤ºï¼Œå…¶ä¸­è®¨è®ºäº†ä¸¤ä¸ªé—®é¢˜åœ¨ä¸åŒçš„è§£ç æ­¥éª¤å‡è¿›è¡Œåˆ†æ”¯ï¼Œfirst step çš„åˆ†æ”¯å¯ä»¥æœ‰æ•ˆåœ°æå‡ CoT-Path çš„å¤šæ ·æ€§ï¼Œç”±äºè¿™æ ·ä¸€ç§è‡ªå›å½’è§£ç çš„æ–¹å¼ï¼Œåç»­çš„åˆ†æ”¯ä¼šå—åˆ°å‰åºè§£ç æ­¥éª¤çš„å½±å“ï¼Œå¦‚æœå‰åºåˆ†æ”¯ä¸­å­˜åœ¨é”™è¯¯ä¼šä¸¥é‡åœ°å½±å“åç»­è§£ç çš„æ­£ç¡®æ€§ä¸ªã€‚åˆ†æ”¯çš„æ·±åº¦å¯¹äºä¸åŒçš„ä»»åŠ¡è€Œè¨€ï¼Œé€‚åˆçš„æ·±åº¦ä¹Ÿä¸åŒã€‚</p>
        
        <figure>
          <img src="branch.png" alt="branch">
          <figcaption>å›¾5ï¼šä¸åŒåˆ†æ”¯æ·±åº¦çš„è®¨è®ºã€‚</figcaption>
        </figure>

        <h3 id="finding-4">4. Aggregation of the decoding paths can enhance the stability of the results.</h3>
        <p>å€Ÿé‰´ Self-Consistency çš„æ€æƒ³ï¼Œå¯ä»¥æƒ³åˆ°å¦‚æœå°† top-k ä¸ª CoT-Path ä¸­ç­”æ¡ˆç›¸åŒçš„è·¯å¾„èšåˆï¼Œä¸ºæ¯ä¸ªå¯èƒ½çš„ç­”æ¡ˆæä¾›ä¸€ä¸ªæƒé‡ï¼Œæœ€åé€‰æ‹©æƒé‡æœ€å¤§çš„ç­”æ¡ˆã€‚å¦‚ä¸‹å¼æ‰€ç¤º</p>
        
        <div class="math">
          $$
          \tilde{\Delta}_a=\sum_k\Delta_{k,a}
          $$
        </div>
        
        <p>å…¶ä¸­ $\Delta_{k,a}$ è¡¨ç¤ºç¬¬ $k$ æ¡è§£ç è·¯å¾„ï¼Œç­”æ¡ˆä¸º $a$ã€‚å¦‚å›¾ 6 æ‰€ç¤ºï¼Œèšåˆè·¯å¾„çš„æ–¹å¼åœ¨æœ‰æ—  prompt çš„æƒ…å†µä¸‹ï¼Œå‡è¾¾åˆ°äº†æœ€ä¼˜çš„æ€§èƒ½ã€‚</p>
        
        <figure>
          <img src="result-combining-cot-decoding-with-cot-prompting.png" alt="result-combining-cot-decoding-with-cot-prompting">
          <figcaption>å›¾6ï¼šå°† CoT-Decoding å’Œ CoT-Prompting ç»“åˆã€‚</figcaption>
        </figure>
        
        <p>åŒæ—¶å¯ä»¥çœ‹å‡ºï¼Œå°† CoT-Prompting å’Œ CoT-Decoding ç»“åˆï¼Œèƒ½å¤Ÿè¾¾åˆ°æ›´å¥½çš„æ•ˆæœï¼ŒåŒæ—¶åœ¨æœ‰æ—  prompt çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½ä¼˜äº Self-Consistencyã€‚</p>

        <h3 id="finding-5">5. CoT-Decoding can elicit reasoning from language models effectively.</h3>
        
        <h4>Comparison with different methods.</h4>
        <p>ä¸å…¶ä»–çš„é‡‡æ ·æ–¹æ³•ç›¸æ¯”ï¼šTop-k samplingã€Top-p samplingã€Beam searchã€Temperature sampleã€‚å°†æœ€åŸºç¡€çš„è´ªå©ªè§£ç ä½œä¸ºæ¨¡å‹æ˜¯å¦æ¨ç†çš„ board lineï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›é‡‡æ ·æ–¹æ³•éƒ½æ— æ³•æ¿€æ´»æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œç”šè‡³ä¼šæœ‰æ‰€æŸå¤±ï¼Œè€Œ CoT-Decoding èƒ½å¤Ÿè¾¾åˆ° 25.1% çš„æ€§èƒ½ï¼Œç›¸å¯¹è´ªå©ªè§£ç è€Œè¨€å¤§å¹…åº¦æå‡ã€‚</p>
        
        <figure>
          <img src="7.png" alt="7">
        </figure>

        <h4>CoT-decoding effectively elicits reasoning across language models and model scales.</h4>
        <p>è¯¥éƒ¨åˆ†è®¨è®ºäº† CoT-Decoding çš„æ³›åŒ–èƒ½åŠ›ä¸ Scale up çš„èƒ½åŠ›ï¼Œå¦‚å›¾ 8 æ‰€ç¤ºï¼Œåœ¨ä¸åŒçš„æ¨¡å‹ä¸Šï¼ŒCoT-Decoding ç›¸è¾ƒäº Greedy decoding è€Œè¨€å‡å±•ç°äº†æ›´å¥½çš„æ€§èƒ½ï¼ŒåŒæ—¶å¦‚å›¾ 9 æ‰€ç¤ºï¼ŒCoT-Decoding èƒ½å¤Ÿåœ¨ä¸åŒå‚æ•°é‡çš„æ¨¡å‹ä¸Š Scale upï¼Œéšç€æ¨¡å‹å‚æ•°é‡çš„å¢åŠ æ¨¡å‹çš„æ€§èƒ½ä¹Ÿæå‡ï¼Œè€Œåœ¨ Year Parity ä»»åŠ¡ä¸Šï¼ŒCoT-Decoding åŒæ ·èƒ½è¿›è¡Œ Scale upï¼Œä½†æ˜¯è´ªå©ªè§£ç å´æ— æ³• Scale upï¼Œç”šè‡³åœ¨æ›´å¤§çš„æ¨¡å‹ä¸Šçš„æ€§èƒ½æ›´å·®ã€‚</p>
        
        <figure>
          <img src="across-models.png" alt="across-models">
          <figcaption>å›¾8ï¼šCoT-Decoding åœ¨ä¸åŒæ¨¡å‹ä¸Šçš„æ€§èƒ½ã€‚</figcaption>
        </figure>
        
        <figure>
          <img src="across-size.png" alt="across-size">
          <figcaption>å›¾9ï¼šCoT-Decoding åœ¨ä¸åŒå‚æ•°é‡æ¨¡å‹ä¸Šçš„æ€§èƒ½ã€‚</figcaption>
        </figure>

        <h3 id="finding-6">6. CoT-Decoding partially closes the reasoning gap between pre-trained and instruction-tuned models.</h3>
        <p>ä¸Šé¢çš„å®éªŒå‡æ˜¯åœ¨é¢„è®­ç»ƒæ¨¡å‹ä¸Šè¿›è¡Œçš„ï¼ŒæŒ‡ä»¤å¾®è°ƒæ¨¡å‹å…·æœ‰æ›´å¥½çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ä»¥åŠåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸€äº›ç›‘ç£æ•°æ®å°±åŒ…å«äº†æ¨ç†è¿‡ç¨‹ï¼Œè¿™ä¸ºæ¨¡å‹çš„æ¨ç†æä¾›äº†ä¸€äº›åŸºç¡€ã€‚å¦‚å›¾ 10 æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ° CoT-Decoding ä¸ºé¢„è®­ç»ƒæ¨¡å‹å’ŒæŒ‡ä»¤å¾®è°ƒæ¨¡å‹å‡èƒ½å¸¦æ¥ç›¸åº”çš„æ”¶ç›Šï¼Œä½†æŒ‡ä»¤å¾®è°ƒçš„æ”¶ç›Šå°äº CoT-Decodingï¼Œè¿™æˆ–è®¸è¯´æ˜å­˜åœ¨ä¸€å®šçš„æ¨ç†èƒ½åŠ›ç“¶é¢ˆã€‚</p>
        
        <figure>
          <img src="10.png" alt="10">
          <figcaption>å›¾10ï¼šé¢„è®­ç»ƒæ¨¡å‹ä¸æŒ‡ä»¤å¾®è°ƒæ¨¡å‹å¯¹æ¯”</figcaption>
        </figure>
        
        <p>é€šè¿‡é€‰æ‹©ä¸åŒçš„ $k$ï¼Œå¦‚å›¾ 11 æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°éšç€ $k$ çš„å¢åŠ ï¼Œå‡†ç¡®ç‡ä¹Ÿéšä¹‹ä¸Šå‡ï¼Œä½†æ˜¯åœ¨æŒ‡ä»¤å¾®è°ƒæ¨¡å‹ä¸Šåœ¨ä¸€å®šçš„ $k$ å€¼åè¾¾åˆ°ç¨³å®šï¼Œåœ¨æ›´éš¾çš„ Multi-step Arith ä»»åŠ¡ä¸Šï¼ŒæŒ‡ä»¤å¾®è°ƒæ¨¡å‹ä¹Ÿæ˜¾ç¤ºå‡ºæ›´ä¸ºé å‰çš„ $k$ çš„ç¨³å®šå€¼ï¼Œè¿™å¯èƒ½è¡¨æ˜ï¼ŒæŒ‡ä»¤å¾®è°ƒå¯ä»¥å¸®åŠ©æ¨¡å‹å°†æ¨ç†æ­¥éª¤å¸¦åˆ°æ›´ä¸ºé å‰çš„è§£ç æ­¥éª¤ä¸Šã€‚</p>
        
        <figure>
          <img src="diff_k.png" alt="diff_k">
          <figcaption>å›¾11ï¼šä¸åŒ $k$ å€¼ä¸‹çš„æƒ…å†µ</figcaption>
        </figure>

        <h2 id="reference">Reference</h2>
        <p>[1] Wang X, Zhou D. <a href="https://openreview.net/forum?id=4Zt7S0B0Jp">Chain-of-Thought Reasoning Without Prompting</a> [C]. The Thirty-Eighth Annual Conference on Neural Information Processing Systems (NeurIPS 2024).</p>
        <p>[2] Nye M, Andreassen AJ, Gur-Ari G, et al. <a href="https://openreview.net/forum?id=HBlx2idbkbq">Show Your Work: Scratchpads for Intermediate Computation with Language Models</a> [C]. ICLR, Deep Learning for Code Workshop, 2022.</p>
        <p>[3] Blog: <a href="https://leehanchung.github.io/blogs/2024/10/21/reasoning-inference-scaling/">https://leehanchung.github.io/blogs/2024/10/21/reasoning-inference-scaling/</a></p>
        <p>[4] Wei J, Wang X, Schuurmans D, et al. <a href="https://arxiv.org/abs/2201.11903">Chain-of-thought prompting elicits reasoning in large language models</a>[J]. Advances in neural information processing systems, 2022, 35: 24824-24837.</p>
        <p>[5] Wang X, Wei J, Schuurmans D, et al. <a href="https://arxiv.org/abs/2203.11171">Self-Consistency Improves Chain of Thought Reasoning in Language Models</a>[C]. The Eleventh International Conference on Learning Representations.</p>

        <h2 id="contact">Contact</h2>
        <p>There may be some errors present. If you find any, please feel free to contact me at <code>wangqiyao@mail.dlut.edu.cn</code>. I would appreciate it!</p>
      </div>
    </div>
  </div>

  <script>
    // åŠ¨æ€ç”Ÿæˆç›®å½•
    const toc = document.getElementById('toc');
    toc.innerHTML = '<strong>Table of Contents</strong>';

    const ul = document.createElement('ul');
    toc.appendChild(ul);

    // è·å–æ‰€æœ‰æ ‡é¢˜
    const headers = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headers.forEach(header => {
        // å¿½ç•¥ h1ï¼Œä¸æ·»åŠ åˆ°ç›®å½•ä¸­
        if (header.tagName === 'H1') return;

        const li = document.createElement('li');
        li.style.marginLeft = `${(parseInt(header.tagName[1]) - 1) * 10}px`;

        const a = document.createElement('a');
        a.href = `#${header.id || header.innerText.replace(/\s+/g, '-').toLowerCase()}`;
        a.textContent = header.innerText;
        a.target = "_self";

        // å¦‚æœæ˜¯ h2ï¼Œä½¿ç”¨é»‘è‰²å®å¿ƒç‚¹
        if (header.tagName === 'H2') {
            li.style.listStyleType = 'disc';  // é»‘è‰²å®å¿ƒåœ†ç‚¹
            a.style.color = 'black';  // h2 ä¸ºé»‘è‰²
        }
        // å¦‚æœæ˜¯ h3ï¼Œä½¿ç”¨ç©ºå¿ƒåœ†ç‚¹
        else if (header.tagName === 'H3') {
            li.style.listStyleType = 'circle';  // ç©ºå¿ƒåœ†ç‚¹
            a.style.color = 'gray';  // h3 ä¸ºç°è‰²
        }
        // å¦‚æœæ˜¯ h4ï¼Œä½¿ç”¨æ–¹å—
        else if (header.tagName === 'H4') {
            li.style.listStyleType = 'square';  // æ–¹å—
            a.style.color = 'gray';  // h4 ä¸ºç°è‰²
        }
        // å¦‚æœæ˜¯ h5 å’Œ h6ï¼Œä½¿ç”¨æ–¹å—
        else {
            li.style.listStyleType = 'square';  // æ–¹å—
            a.style.color = 'gray';  // h5 å’Œ h6 ä¸ºç°è‰²
        }

        if (!header.id) {
            header.id = header.innerText.replace(/\s+/g, '-').toLowerCase();
        }

        li.appendChild(a);
        ul.appendChild(li);
    });

    // æ·»åŠ MathJaxç±»å‹æç¤º
    document.addEventListener('DOMContentLoaded', function() {
      if (window.MathJax) {
        MathJax.typesetPromise();
      }
    });
  </script>
</body>
</html>
